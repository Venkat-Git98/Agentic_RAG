{
  "version": 3,
  "sources": ["../../use-undo/lib/use-undo.m.js"],
  "sourcesContent": ["import { useReducer, useCallback } from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar ActionType;\n\n(function (ActionType) {\n  ActionType[\"Undo\"] = \"UNDO\";\n  ActionType[\"Redo\"] = \"REDO\";\n  ActionType[\"Set\"] = \"SET\";\n  ActionType[\"Reset\"] = \"RESET\";\n})(ActionType || (ActionType = {}));\n\nvar initialState = {\n  past: [],\n  present: null,\n  future: []\n};\n\nvar useUndo = function useUndo(initialPresent, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  var _useCheckpoints$opts = _extends({\n    useCheckpoints: false\n  }, opts),\n      useCheckpoints = _useCheckpoints$opts.useCheckpoints;\n\n  var reducer = function reducer(state, action) {\n    var past = state.past,\n        present = state.present,\n        future = state.future;\n\n    switch (action.type) {\n      case ActionType.Undo:\n        {\n          if (past.length === 0) {\n            return state;\n          }\n\n          var previous = past[past.length - 1];\n          var newPast = past.slice(0, past.length - 1);\n          return {\n            past: newPast,\n            present: previous,\n            future: [present].concat(future)\n          };\n        }\n\n      case ActionType.Redo:\n        {\n          if (future.length === 0) {\n            return state;\n          }\n\n          var next = future[0];\n          var newFuture = future.slice(1);\n          return {\n            past: [].concat(past, [present]),\n            present: next,\n            future: newFuture\n          };\n        }\n\n      case ActionType.Set:\n        {\n          var isNewCheckpoint = useCheckpoints ? !!action.historyCheckpoint : true;\n          var newPresent = action.newPresent;\n\n          if (newPresent === present) {\n            return state;\n          }\n\n          return {\n            past: isNewCheckpoint === false ? past : [].concat(past, [present]),\n            present: newPresent,\n            future: []\n          };\n        }\n\n      case ActionType.Reset:\n        {\n          var _newPresent = action.newPresent;\n          return {\n            past: [],\n            present: _newPresent,\n            future: []\n          };\n        }\n    }\n  };\n\n  var _useReducer = useReducer(reducer, _extends({}, initialState, {\n    present: initialPresent\n  })),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  var canUndo = state.past.length !== 0;\n  var canRedo = state.future.length !== 0;\n  var undo = useCallback(function () {\n    if (canUndo) {\n      dispatch({\n        type: ActionType.Undo\n      });\n    }\n  }, [canUndo]);\n  var redo = useCallback(function () {\n    if (canRedo) {\n      dispatch({\n        type: ActionType.Redo\n      });\n    }\n  }, [canRedo]);\n  var set = useCallback(function (newPresent, checkpoint) {\n    if (checkpoint === void 0) {\n      checkpoint = false;\n    }\n\n    dispatch({\n      type: ActionType.Set,\n      newPresent: newPresent,\n      historyCheckpoint: checkpoint\n    });\n  }, []);\n  var reset = useCallback(function (newPresent) {\n    return dispatch({\n      type: ActionType.Reset,\n      newPresent: newPresent\n    });\n  }, []);\n  return [state, {\n    set: set,\n    reset: reset,\n    undo: undo,\n    redo: redo,\n    canUndo: canUndo,\n    canRedo: canRedo\n  }];\n};\n\nexport default useUndo;\n"],
  "mappings": "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",
  "names": ["ActionType", "useUndo", "reducer", "state"]
}
